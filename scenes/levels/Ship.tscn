[gd_scene load_steps=15 format=3 uid="uid://nk1l6h8dmcw"]

[ext_resource type="Script" path="res://scripts/player/PlayerSpawner.gd" id="1_5lm7w"]
[ext_resource type="Environment" uid="uid://dxipancqbujtn" path="res://resources/ShipEnvironment.tres" id="1_fp0p1"]
[ext_resource type="MeshLibrary" uid="uid://b1djqtj8bbxho" path="res://resources/SpaceInteriorElementsLibrary.tres" id="2_ecxme"]
[ext_resource type="PackedScene" uid="uid://ceoib8msrs7jy" path="res://scenes/objects/box_large.tscn" id="3_pmqgt"]
[ext_resource type="PackedScene" uid="uid://d4b6j2icha5d6" path="res://scenes/objects/box_long.tscn" id="4_j4gt5"]
[ext_resource type="PackedScene" uid="uid://o8pu2dqcdr7e" path="res://scenes/objects/box_small.tscn" id="5_xuiy6"]
[ext_resource type="PackedScene" uid="uid://cm7bfr7yfdtk4" path="res://scenes/objects/box_wide.tscn" id="6_nlxls"]
[ext_resource type="PackedScene" uid="uid://dhsuhcelso85c" path="res://scenes/objects/button.tscn" id="9_k7x3o"]
[ext_resource type="PackedScene" uid="uid://cnsvsg5ll712j" path="res://art/space interior elements/object_073.glb" id="10_17rqg"]
[ext_resource type="PackedScene" uid="uid://sk4aooslupmc" path="res://art/space interior elements/object_007_stripe.glb" id="10_qb1gj"]
[ext_resource type="PackedScene" uid="uid://c7k6vlmyfocba" path="res://scenes/objects/door1.tscn" id="10_qn8fe"]
[ext_resource type="PackedScene" uid="uid://b0vcy1f0pal6w" path="res://scenes/objects/manual_elevator.tscn" id="11_1boo3"]
[ext_resource type="PackedScene" uid="uid://dtxyjlio41upf" path="res://scenes/objects/lever.tscn" id="13_xlqrf"]

[sub_resource type="BoxMesh" id="BoxMesh_qwljx"]

[node name="Ship" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource("1_fp0p1")

[node name="SpawnLocation" type="Node3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, -0.494716, 0.172416, 1)

[node name="PlayerSpawner" type="MultiplayerSpawner" parent="." node_paths=PackedStringArray("spawn_location")]
_spawnable_scenes = PackedStringArray("res://scenes/Player.tscn")
spawn_path = NodePath("../Players")
spawn_limit = 64
script = ExtResource("1_5lm7w")
spawn_location = NodePath("../SpawnLocation")

[node name="Players" type="Node3D" parent="."]

[node name="Lights" type="Node3D" parent="."]

[node name="OmniLight3D" type="OmniLight3D" parent="Lights"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.514759, 0.774583, 2.52934)
light_color = Color(0.85098, 0.890196, 0.913725, 1)
light_energy = 1.062
omni_range = 3.527
omni_attenuation = 1.80248

[node name="Objects" type="Node3D" parent="."]

[node name="box_large" parent="Objects" instance=ExtResource("3_pmqgt")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.11414, 0.0875, 1.90105)

[node name="box_long" parent="Objects" instance=ExtResource("4_j4gt5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.18659, 0.0875, 2.30453)

[node name="box_small" parent="Objects" instance=ExtResource("5_xuiy6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.3153, 0.0875, 2.5901)

[node name="box_wide" parent="Objects" instance=ExtResource("6_nlxls")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.28666, 0.0875, 3.03667)

[node name="Door" parent="Objects" node_paths=PackedStringArray("triggers") instance=ExtResource("10_qn8fe")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.5, 0.05, 2.5)
triggers = [NodePath("../Button2")]

[node name="Door2" parent="Objects" node_paths=PackedStringArray("triggers") instance=ExtResource("10_qn8fe")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.5, 0.05, 2.5)
triggers = [NodePath("../Button"), NodePath("../Lever2"), NodePath("../Lever")]

[node name="Button" parent="Objects" instance=ExtResource("9_k7x3o")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -1.5, 0.553283, 2)

[node name="Button2" parent="Objects" instance=ExtResource("9_k7x3o")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -3.5, 0.553283, 2)

[node name="object_073" parent="Objects" instance=ExtResource("10_17rqg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, 1, 2.5)

[node name="Lever" parent="Objects" instance=ExtResource("13_xlqrf")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -1, 0.0655602, 2)

[node name="Lever2" parent="Objects" instance=ExtResource("13_xlqrf")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -2, 0.063, 2)

[node name="ManualElevator" parent="Objects" node_paths=PackedStringArray("down_trigger", "middle_trigger", "up_trigger") instance=ExtResource("11_1boo3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, 0, 4.5)
down_trigger = NodePath("../ElevatorDownButtonPole/Button")
middle_trigger = NodePath("../ElevatorMiddleButtonPole/Button")
up_trigger = NodePath("../ElevatorUpButtonPole/Button")
floor_positions = {
-1: Vector3(-0.5, -2, 4.5),
0: Vector3(-0.5, 0, 4.5),
1: Vector3(-0.5, 2, 4.5)
}

[node name="ElevatorDownButtonPole" type="Node3D" parent="Objects"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.279956, 0.260887, 5.00791)

[node name="Button" parent="Objects/ElevatorDownButtonPole" instance=ExtResource("9_k7x3o")]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, -3.69847e-05, 0.199864, -3.33786e-05)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Objects/ElevatorDownButtonPole"]
transform = Transform3D(0.0904459, 0, 0, 0, 0.4, 0, 0, 0, 0.0875451, 0, 0, 0)
mesh = SubResource("BoxMesh_qwljx")
skeleton = NodePath("../..")

[node name="ElevatorMiddleButtonPole" type="Node3D" parent="Objects"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.503131, 0.260887, 5.00791)

[node name="Button" parent="Objects/ElevatorMiddleButtonPole" instance=ExtResource("9_k7x3o")]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, -3.69549e-05, 0.199864, -3.33786e-05)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Objects/ElevatorMiddleButtonPole"]
transform = Transform3D(0.0904459, 0, 0, 0, 0.4, 0, 0, 0, 0.0875451, 0, 0, 0)
mesh = SubResource("BoxMesh_qwljx")
skeleton = NodePath("../..")

[node name="ElevatorUpButtonPole" type="Node3D" parent="Objects"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.728159, 0.260887, 5.00791)

[node name="Button" parent="Objects/ElevatorUpButtonPole" instance=ExtResource("9_k7x3o")]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, -3.69549e-05, 0.199864, -3.33786e-05)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Objects/ElevatorUpButtonPole"]
transform = Transform3D(0.0904459, 0, 0, 0, 0.4, 0, 0, 0, 0.0875451, 0, 0, 0)
mesh = SubResource("BoxMesh_qwljx")
skeleton = NodePath("../..")

[node name="GridMap Floor" type="GridMap" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
mesh_library = ExtResource("2_ecxme")
cell_size = Vector3(1, 1, 1)
data = {
"cells": PackedInt32Array(65535, 1, 1441805, 65534, 2, 1441805, 65535, 2, 1441805, 0, 2, 13, 65535, 3, 13, 65534, 1, 655441, 0, 1, 1048657, 0, 3, 81, 65534, 3, 1441873, 65533, 2, 13, 65532, 2, 655373, 65533, 1, 655439, 65533, 3, 79, 65532, 1, 655440, 65532, 3, 1441872, 65534, 4, 1441871, 0, 4, 1048655, 0, 5, 80, 65534, 5, 1441872, 65535, 5, 79, 1, 2, 1048655, 1, 1, 1048656, 1, 3, 80, 65535, 0, 655439, 0, 0, 1048656, 65534, 0, 655440, 65531, 2, 655387)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="GridMap Walls" type="GridMap" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.45, 0)
mesh_library = ExtResource("2_ecxme")
cell_size = Vector3(1, 1, 1)
data = {
"cells": PackedInt32Array(65532, 1, 82, 65532, 2, 11, 65532, 3, 1048658, 65533, 1, 1441799, 65533, 3, 1048583, 65534, 0, 9, 65534, 1, 82, 65534, 2, 11, 65534, 3, 1048658, 65534, 4, 86, 65534, 5, 1048658, 65535, 0, 1441878, 65535, 1, 1441803, 65535, 3, 1048587, 65535, 4, 33, 65535, 5, 1048662, 0, 0, 1441801, 0, 1, 1441874, 0, 2, 655371, 0, 3, 655442, 0, 4, 655446, 0, 5, 655442, 1, 1, 1441801, 1, 2, 655367, 1, 3, 655369)
}

[node name="Fillers" type="Node3D" parent="GridMap Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)

[node name="object_007_stripe" parent="GridMap Walls/Fillers" instance=ExtResource("10_qb1gj")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -2, 0, 1.5)

[node name="object_007_stripe2" parent="GridMap Walls/Fillers" instance=ExtResource("10_qb1gj")]
transform = Transform3D(1.31134e-07, 0, 1, 0, 1, 0, -1, 0, 1.31134e-07, -2, 0, 3.5)

[node name="object_007_stripe3" parent="GridMap Walls/Fillers" instance=ExtResource("10_qb1gj")]
transform = Transform3D(1, 0, -1.74846e-07, 0, 1, 0, 1.74846e-07, 0, 1, -1.5, 0, 4)

[node name="object_007_stripe4" parent="GridMap Walls/Fillers" instance=ExtResource("10_qb1gj")]
transform = Transform3D(-1, 0, 2.62268e-07, 0, 1, 0, -2.62268e-07, 0, -1, 0.5, 0, 4)

[node name="GridMap Ceiling" type="GridMap" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.6, 0)
mesh_library = ExtResource("2_ecxme")
cell_size = Vector3(1, 1, 1)
data = {
"cells": PackedInt32Array(65535, 2, 13, 65534, 2, 13, 65533, 2, 13, 0, 2, 13, 65535, 3, 13, 65535, 1, 13, 65535, 0, 524367, 0, 1, 524369, 0, 3, 1310801, 65534, 3, 131153, 65534, 1, 1179729, 65534, 4, 1179727, 0, 4, 1310799, 1, 2, 1310799, 65532, 2, 1179727, 65533, 1, 524367, 65533, 3, 131151, 1, 1, 524368, 1, 3, 1310800, 0, 5, 1310800, 65534, 5, 131152, 65532, 3, 131152, 65532, 1, 1179728, 65534, 0, 1179728, 0, 0, 524368, 65535, 5, 131151)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)
